(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{461:function(t,v,_){"use strict";_.r(v);var e=_(1),a=Object(e.a)({},(function(){var t=this,v=t._self._c;return v("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[v("h1",{attrs:{id:"索引失效的情况"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#索引失效的情况"}},[t._v("#")]),t._v(" 索引失效的情况")]),t._v(" "),v("p",[t._v("1、like 以%开头，索引无效；不以%开头的时候，才会使用到索引，索引有效。")]),t._v(" "),v("p",[t._v("2、or语句前后没有同时使用索引。当or左右查询字段只有一个是索引，该索引失效，只有当or左右查询字段均为索引时，才会生效")]),t._v(" "),v("p",[t._v("3、组合索引，不符合最左原则，索引失效.")]),t._v(" "),v("p",[t._v("​\t最左匹配原则：最左优先，以最左边的为起点任何连续的索引都能匹配上。同时遇到范围查询(>、<、between、like)就会停止匹配。")]),t._v(" "),v("p",[t._v("​\t如有索引 (a,b,c,d),  ，查询条件 "),v("code",[t._v("a=1 and b=2 and c>3 and d=4")]),t._v("，则会在每个节点依次命中a、b、c，无法命中d")]),t._v(" "),v("p",[t._v("4、数据类型出现隐式转化。如varchar不加单引号的话可能会自动转换为int型，使索引无效，产生全表扫描")]),t._v(" "),v("p",[t._v("5、在索引字段上使用not，<>，!=。不等于操作符是永远不会用到索引的，因此对它的处理只会产生全表扫描。")]),t._v(" "),v("p",[t._v("​\t\t优化方法： key<>0 改为 key>0 or key<0。")]),t._v(" "),v("p",[t._v("6、对索引字段进行计算操作、字段上使用函数。")]),t._v(" "),v("p",[t._v("7、当全表扫描速度比索引速度快时，mysql会使用全表扫描，此时索引失效。")]),t._v(" "),v("p",[v("strong",[t._v("索引失效分析工具：")])]),t._v(" "),v("p",[t._v("可以使用explain命令加在要分析的sql语句前面，在执行结果中查看key这一列的值，如果为NULL，说明没有使用索引。")])])}),[],!1,null,null,null);v.default=a.exports}}]);